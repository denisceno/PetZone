<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Schedule an Appointment | Pets</title>
    <link rel="stylesheet" href="{% static 'css/appointments-home.css' %}" type="text/css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    {% include 'navbar.html' %}
    {% if user.is_authenticated %}
    <h2>Schedule an Appointment</h2>
    <div class="container">
      <form method="POST" action="" class="mb-3">
        {% csrf_token %}
        <div class="mb-3">{{ form.as_p }}</div>
        <input type="submit" value="Submit" class="btn btn-success" />
      </form>
    </div>
    {% else %}
    <div class="text-center mt-5">
        <h2>Join Us to Schedule an Appointment with Our Veterinarian </h2>
        <a href="{% url 'login' %}" class="btn btn-calculate mt-3">Join Now</a>
    </div>
    {% endif %}
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous">
  </script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
          flatpickr("#appointment-date", {
              enableTime: true,             // Enable time selection
              time_24hr: true,              // Use 24-hour format
              minDate: "today",             // Disable past dates
              minTime: "09:00",             // Earliest appointment time
              maxTime: "17:00",             // Latest appointment time
              dateFormat: "Y-m-d H:i",      // Format compatible with Django
              defaultHour: 9,               // Default start time
              defaultMinute: 0,             // Default minute
              step: 30,                     // Minute step (30-minute intervals)
              inline: false,                // Disable inline display of the calendar
              noCalendar: false,            // Keep the calendar visible
              disableMobile: true,          // Disable mobile-specific UI for consistency
              time_24hr: true,              // Use 24-hour format for time
          });
      });
      
        </script>

  </body>
</html>
